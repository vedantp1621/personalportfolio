{"ast":null,"code":"import Node, { addNodeClass } from '../core/Node.js';\nimport { vectorComponents } from '../core/constants.js';\nconst stringVectorComponents = vectorComponents.join('');\nclass SplitNode extends Node {\n  constructor(node) {\n    let components = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x';\n    super();\n    this.node = node;\n    this.components = components;\n    this.isSplitNode = true;\n  }\n  getVectorLength() {\n    let vectorLength = this.components.length;\n    for (const c of this.components) {\n      vectorLength = Math.max(vectorComponents.indexOf(c) + 1, vectorLength);\n    }\n    return vectorLength;\n  }\n  getComponentType(builder) {\n    return builder.getComponentType(this.node.getNodeType(builder));\n  }\n  getNodeType(builder) {\n    return builder.getTypeFromLength(this.components.length, this.getComponentType(builder));\n  }\n  generate(builder, output) {\n    const node = this.node;\n    const nodeTypeLength = builder.getTypeLength(node.getNodeType(builder));\n    let snippet = null;\n    if (nodeTypeLength > 1) {\n      let type = null;\n      const componentsLength = this.getVectorLength();\n      if (componentsLength >= nodeTypeLength) {\n        // needed expand the input node\n\n        type = builder.getTypeFromLength(this.getVectorLength(), this.getComponentType(builder));\n      }\n      const nodeSnippet = node.build(builder, type);\n      if (this.components.length === nodeTypeLength && this.components === stringVectorComponents.slice(0, this.components.length)) {\n        // unnecessary swizzle\n\n        snippet = builder.format(nodeSnippet, type, output);\n      } else {\n        snippet = builder.format(`${nodeSnippet}.${this.components}`, this.getNodeType(builder), output);\n      }\n    } else {\n      // ignore .components if .node returns float/integer\n\n      snippet = node.build(builder, output);\n    }\n    return snippet;\n  }\n  serialize(data) {\n    super.serialize(data);\n    data.components = this.components;\n  }\n  deserialize(data) {\n    super.deserialize(data);\n    this.components = data.components;\n  }\n}\nexport default SplitNode;\naddNodeClass('SplitNode', SplitNode);","map":{"version":3,"names":["Node","addNodeClass","vectorComponents","stringVectorComponents","join","SplitNode","constructor","node","components","arguments","length","undefined","isSplitNode","getVectorLength","vectorLength","c","Math","max","indexOf","getComponentType","builder","getNodeType","getTypeFromLength","generate","output","nodeTypeLength","getTypeLength","snippet","type","componentsLength","nodeSnippet","build","slice","format","serialize","data","deserialize"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/utils/SplitNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { vectorComponents } from '../core/constants.js';\n\nconst stringVectorComponents = vectorComponents.join( '' );\n\nclass SplitNode extends Node {\n\n\tconstructor( node, components = 'x' ) {\n\n\t\tsuper();\n\n\t\tthis.node = node;\n\t\tthis.components = components;\n\n\t\tthis.isSplitNode = true;\n\n\t}\n\n\tgetVectorLength() {\n\n\t\tlet vectorLength = this.components.length;\n\n\t\tfor ( const c of this.components ) {\n\n\t\t\tvectorLength = Math.max( vectorComponents.indexOf( c ) + 1, vectorLength );\n\n\t\t}\n\n\t\treturn vectorLength;\n\n\t}\n\n\tgetComponentType( builder ) {\n\n\t\treturn builder.getComponentType( this.node.getNodeType( builder ) );\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\treturn builder.getTypeFromLength( this.components.length, this.getComponentType( builder ) );\n\n\t}\n\n\tgenerate( builder, output ) {\n\n\t\tconst node = this.node;\n\t\tconst nodeTypeLength = builder.getTypeLength( node.getNodeType( builder ) );\n\n\t\tlet snippet = null;\n\n\t\tif ( nodeTypeLength > 1 ) {\n\n\t\t\tlet type = null;\n\n\t\t\tconst componentsLength = this.getVectorLength();\n\n\t\t\tif ( componentsLength >= nodeTypeLength ) {\n\n\t\t\t\t// needed expand the input node\n\n\t\t\t\ttype = builder.getTypeFromLength( this.getVectorLength(), this.getComponentType( builder ) );\n\n\t\t\t}\n\n\t\t\tconst nodeSnippet = node.build( builder, type );\n\n\t\t\tif ( this.components.length === nodeTypeLength && this.components === stringVectorComponents.slice( 0, this.components.length ) ) {\n\n\t\t\t\t// unnecessary swizzle\n\n\t\t\t\tsnippet = builder.format( nodeSnippet, type, output );\n\n\t\t\t} else {\n\n\t\t\t\tsnippet = builder.format( `${nodeSnippet}.${this.components}`, this.getNodeType( builder ), output );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// ignore .components if .node returns float/integer\n\n\t\t\tsnippet = node.build( builder, output );\n\n\t\t}\n\n\t\treturn snippet;\n\n\t}\n\n\tserialize( data ) {\n\n\t\tsuper.serialize( data );\n\n\t\tdata.components = this.components;\n\n\t}\n\n\tdeserialize( data ) {\n\n\t\tsuper.deserialize( data );\n\n\t\tthis.components = data.components;\n\n\t}\n\n}\n\nexport default SplitNode;\n\naddNodeClass( 'SplitNode', SplitNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}