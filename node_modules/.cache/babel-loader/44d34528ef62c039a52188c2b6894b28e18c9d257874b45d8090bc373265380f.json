{"ast":null,"code":"import Node, { addNodeClass } from '../core/Node.js';\nimport { maxMipLevel } from './MaxMipLevelNode.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\nclass SpecularMIPLevelNode extends Node {\n  constructor(textureNode) {\n    let roughnessNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    super('float');\n    this.textureNode = textureNode;\n    this.roughnessNode = roughnessNode;\n  }\n  setup() {\n    const {\n      textureNode,\n      roughnessNode\n    } = this;\n\n    // taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\n    const maxMIPLevelScalar = maxMipLevel(textureNode);\n    const sigma = roughnessNode.mul(roughnessNode).mul(Math.PI).div(roughnessNode.add(1.0));\n    const desiredMIPLevel = maxMIPLevelScalar.add(sigma.log2());\n    return desiredMIPLevel.clamp(0.0, maxMIPLevelScalar);\n  }\n}\nexport default SpecularMIPLevelNode;\nexport const specularMIPLevel = nodeProxy(SpecularMIPLevelNode);\naddNodeClass('SpecularMIPLevelNode', SpecularMIPLevelNode);","map":{"version":3,"names":["Node","addNodeClass","maxMipLevel","nodeProxy","SpecularMIPLevelNode","constructor","textureNode","roughnessNode","arguments","length","undefined","setup","maxMIPLevelScalar","sigma","mul","Math","PI","div","add","desiredMIPLevel","log2","clamp","specularMIPLevel"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/utils/SpecularMIPLevelNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { maxMipLevel } from './MaxMipLevelNode.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\n\nclass SpecularMIPLevelNode extends Node {\n\n\tconstructor( textureNode, roughnessNode = null ) {\n\n\t\tsuper( 'float' );\n\n\t\tthis.textureNode = textureNode;\n\t\tthis.roughnessNode = roughnessNode;\n\n\t}\n\n\tsetup() {\n\n\t\tconst { textureNode, roughnessNode } = this;\n\n\t\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\n\t\tconst maxMIPLevelScalar = maxMipLevel( textureNode );\n\n\t\tconst sigma = roughnessNode.mul( roughnessNode ).mul( Math.PI ).div( roughnessNode.add( 1.0 ) );\n\t\tconst desiredMIPLevel = maxMIPLevelScalar.add( sigma.log2() );\n\n\t\treturn desiredMIPLevel.clamp( 0.0, maxMIPLevelScalar );\n\n\t}\n\n}\n\nexport default SpecularMIPLevelNode;\n\nexport const specularMIPLevel = nodeProxy( SpecularMIPLevelNode );\n\naddNodeClass( 'SpecularMIPLevelNode', SpecularMIPLevelNode );\n"],"mappings":"AAAA,OAAOA,IAAI,IAAIC,YAAY,QAAQ,iBAAiB;AACpD,SAASC,WAAW,QAAQ,sBAAsB;AAClD,SAASC,SAAS,QAAQ,6BAA6B;AAEvD,MAAMC,oBAAoB,SAASJ,IAAI,CAAC;EAEvCK,WAAWA,CAAEC,WAAW,EAAyB;IAAA,IAAvBC,aAAa,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAE7C,KAAK,CAAE,OAAQ,CAAC;IAEhB,IAAI,CAACF,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,aAAa,GAAGA,aAAa;EAEnC;EAEAI,KAAKA,CAAA,EAAG;IAEP,MAAM;MAAEL,WAAW;MAAEC;IAAc,CAAC,GAAG,IAAI;;IAE3C;;IAEA,MAAMK,iBAAiB,GAAGV,WAAW,CAAEI,WAAY,CAAC;IAEpD,MAAMO,KAAK,GAAGN,aAAa,CAACO,GAAG,CAAEP,aAAc,CAAC,CAACO,GAAG,CAAEC,IAAI,CAACC,EAAG,CAAC,CAACC,GAAG,CAAEV,aAAa,CAACW,GAAG,CAAE,GAAI,CAAE,CAAC;IAC/F,MAAMC,eAAe,GAAGP,iBAAiB,CAACM,GAAG,CAAEL,KAAK,CAACO,IAAI,CAAC,CAAE,CAAC;IAE7D,OAAOD,eAAe,CAACE,KAAK,CAAE,GAAG,EAAET,iBAAkB,CAAC;EAEvD;AAED;AAEA,eAAeR,oBAAoB;AAEnC,OAAO,MAAMkB,gBAAgB,GAAGnB,SAAS,CAAEC,oBAAqB,CAAC;AAEjEH,YAAY,CAAE,sBAAsB,EAAEG,oBAAqB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}