{"ast":null,"code":"import ContextNode from '../core/ContextNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, nodeProxy, float, vec3 } from '../shadernode/ShaderNode.js';\nclass LightingContextNode extends ContextNode {\n  constructor(node) {\n    let lightingModel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let backdropNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let backdropAlphaNode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    super(node);\n    this.lightingModel = lightingModel;\n    this.backdropNode = backdropNode;\n    this.backdropAlphaNode = backdropAlphaNode;\n    this._context = null;\n  }\n  getContext() {\n    const {\n      backdropNode,\n      backdropAlphaNode\n    } = this;\n    const directDiffuse = vec3().temp('directDiffuse'),\n      directSpecular = vec3().temp('directSpecular'),\n      indirectDiffuse = vec3().temp('indirectDiffuse'),\n      indirectSpecular = vec3().temp('indirectSpecular');\n    const reflectedLight = {\n      directDiffuse,\n      directSpecular,\n      indirectDiffuse,\n      indirectSpecular\n    };\n    const context = {\n      radiance: vec3().temp('radiance'),\n      irradiance: vec3().temp('irradiance'),\n      iblIrradiance: vec3().temp('iblIrradiance'),\n      ambientOcclusion: float(1).temp('ambientOcclusion'),\n      reflectedLight,\n      backdrop: backdropNode,\n      backdropAlpha: backdropAlphaNode\n    };\n    return context;\n  }\n  setup(builder) {\n    this.context = this._context || (this._context = this.getContext());\n    this.context.lightingModel = this.lightingModel || builder.context.lightingModel;\n    return super.setup(builder);\n  }\n}\nexport default LightingContextNode;\nexport const lightingContext = nodeProxy(LightingContextNode);\naddNodeElement('lightingContext', lightingContext);\naddNodeClass('LightingContextNode', LightingContextNode);","map":{"version":3,"names":["ContextNode","addNodeClass","addNodeElement","nodeProxy","float","vec3","LightingContextNode","constructor","node","lightingModel","arguments","length","undefined","backdropNode","backdropAlphaNode","_context","getContext","directDiffuse","temp","directSpecular","indirectDiffuse","indirectSpecular","reflectedLight","context","radiance","irradiance","iblIrradiance","ambientOcclusion","backdrop","backdropAlpha","setup","builder","lightingContext"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/lighting/LightingContextNode.js"],"sourcesContent":["import ContextNode from '../core/ContextNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, nodeProxy, float, vec3 } from '../shadernode/ShaderNode.js';\n\nclass LightingContextNode extends ContextNode {\n\n\tconstructor( node, lightingModel = null, backdropNode = null, backdropAlphaNode = null ) {\n\n\t\tsuper( node );\n\n\t\tthis.lightingModel = lightingModel;\n\t\tthis.backdropNode = backdropNode;\n\t\tthis.backdropAlphaNode = backdropAlphaNode;\n\n\t\tthis._context = null;\n\n\t}\n\n\tgetContext() {\n\n\t\tconst { backdropNode, backdropAlphaNode } = this;\n\n\t\tconst directDiffuse = vec3().temp( 'directDiffuse' ),\n\t\t\tdirectSpecular = vec3().temp( 'directSpecular' ),\n\t\t\tindirectDiffuse = vec3().temp( 'indirectDiffuse' ),\n\t\t\tindirectSpecular = vec3().temp( 'indirectSpecular' );\n\n\t\tconst reflectedLight = {\n\t\t\tdirectDiffuse,\n\t\t\tdirectSpecular,\n\t\t\tindirectDiffuse,\n\t\t\tindirectSpecular\n\t\t};\n\n\t\tconst context = {\n\t\t\tradiance: vec3().temp( 'radiance' ),\n\t\t\tirradiance: vec3().temp( 'irradiance' ),\n\t\t\tiblIrradiance: vec3().temp( 'iblIrradiance' ),\n\t\t\tambientOcclusion: float( 1 ).temp( 'ambientOcclusion' ),\n\t\t\treflectedLight,\n\t\t\tbackdrop: backdropNode,\n\t\t\tbackdropAlpha: backdropAlphaNode\n\t\t};\n\n\t\treturn context;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tthis.context = this._context || ( this._context = this.getContext() );\n\t\tthis.context.lightingModel = this.lightingModel || builder.context.lightingModel;\n\n\t\treturn super.setup( builder );\n\n\t}\n\n}\n\nexport default LightingContextNode;\n\nexport const lightingContext = nodeProxy( LightingContextNode );\n\naddNodeElement( 'lightingContext', lightingContext );\n\naddNodeClass( 'LightingContextNode', LightingContextNode );\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,wBAAwB;AAChD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,cAAc,EAAEC,SAAS,EAAEC,KAAK,EAAEC,IAAI,QAAQ,6BAA6B;AAEpF,MAAMC,mBAAmB,SAASN,WAAW,CAAC;EAE7CO,WAAWA,CAAEC,IAAI,EAAwE;IAAA,IAAtEC,aAAa,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAAA,IAAEG,YAAY,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAAA,IAAEI,iBAAiB,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAErF,KAAK,CAAEF,IAAK,CAAC;IAEb,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACI,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,iBAAiB,GAAGA,iBAAiB;IAE1C,IAAI,CAACC,QAAQ,GAAG,IAAI;EAErB;EAEAC,UAAUA,CAAA,EAAG;IAEZ,MAAM;MAAEH,YAAY;MAAEC;IAAkB,CAAC,GAAG,IAAI;IAEhD,MAAMG,aAAa,GAAGZ,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,eAAgB,CAAC;MACnDC,cAAc,GAAGd,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,gBAAiB,CAAC;MAChDE,eAAe,GAAGf,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,iBAAkB,CAAC;MAClDG,gBAAgB,GAAGhB,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,kBAAmB,CAAC;IAErD,MAAMI,cAAc,GAAG;MACtBL,aAAa;MACbE,cAAc;MACdC,eAAe;MACfC;IACD,CAAC;IAED,MAAME,OAAO,GAAG;MACfC,QAAQ,EAAEnB,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,UAAW,CAAC;MACnCO,UAAU,EAAEpB,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,YAAa,CAAC;MACvCQ,aAAa,EAAErB,IAAI,CAAC,CAAC,CAACa,IAAI,CAAE,eAAgB,CAAC;MAC7CS,gBAAgB,EAAEvB,KAAK,CAAE,CAAE,CAAC,CAACc,IAAI,CAAE,kBAAmB,CAAC;MACvDI,cAAc;MACdM,QAAQ,EAAEf,YAAY;MACtBgB,aAAa,EAAEf;IAChB,CAAC;IAED,OAAOS,OAAO;EAEf;EAEAO,KAAKA,CAAEC,OAAO,EAAG;IAEhB,IAAI,CAACR,OAAO,GAAG,IAAI,CAACR,QAAQ,KAAM,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACC,UAAU,CAAC,CAAC,CAAE;IACrE,IAAI,CAACO,OAAO,CAACd,aAAa,GAAG,IAAI,CAACA,aAAa,IAAIsB,OAAO,CAACR,OAAO,CAACd,aAAa;IAEhF,OAAO,KAAK,CAACqB,KAAK,CAAEC,OAAQ,CAAC;EAE9B;AAED;AAEA,eAAezB,mBAAmB;AAElC,OAAO,MAAM0B,eAAe,GAAG7B,SAAS,CAAEG,mBAAoB,CAAC;AAE/DJ,cAAc,CAAE,iBAAiB,EAAE8B,eAAgB,CAAC;AAEpD/B,YAAY,CAAE,qBAAqB,EAAEK,mBAAoB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}