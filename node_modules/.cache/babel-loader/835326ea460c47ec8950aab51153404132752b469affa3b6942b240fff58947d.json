{"ast":null,"code":"import Node, { addNodeClass } from '../core/Node.js';\nimport { scriptableValue } from './ScriptableValueNode.js';\nimport { addNodeElement, nodeProxy, float } from '../shadernode/ShaderNode.js';\nclass Resources extends Map {\n  get(key) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (this.has(key)) return super.get(key);\n    if (callback !== null) {\n      for (var _len = arguments.length, params = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        params[_key - 2] = arguments[_key];\n      }\n      const value = callback(...params);\n      this.set(key, value);\n      return value;\n    }\n  }\n}\nclass Parameters {\n  constructor(scriptableNode) {\n    this.scriptableNode = scriptableNode;\n  }\n  get parameters() {\n    return this.scriptableNode.parameters;\n  }\n  get layout() {\n    return this.scriptableNode.getLayout();\n  }\n  getInputLayout(id) {\n    return this.scriptableNode.getInputLayout(id);\n  }\n  get(name) {\n    const param = this.parameters[name];\n    const value = param ? param.getValue() : null;\n    return value;\n  }\n}\nexport const global = new Resources();\nclass ScriptableNode extends Node {\n  constructor() {\n    let codeNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    this.codeNode = codeNode;\n    this.parameters = parameters;\n    this._local = new Resources();\n    this._output = scriptableValue();\n    this._outputs = {};\n    this._source = this.source;\n    this._method = null;\n    this._object = null;\n    this._value = null;\n    this._needsOutputUpdate = true;\n    this.onRefresh = this.onRefresh.bind(this);\n    this.isScriptableNode = true;\n  }\n  get source() {\n    return this.codeNode ? this.codeNode.code : '';\n  }\n  setLocal(name, value) {\n    return this._local.set(name, value);\n  }\n  getLocal(name) {\n    return this._local.get(name);\n  }\n  onRefresh() {\n    this._refresh();\n  }\n  getInputLayout(id) {\n    for (const element of this.getLayout()) {\n      if (element.inputType && (element.id === id || element.name === id)) {\n        return element;\n      }\n    }\n  }\n  getOutputLayout(id) {\n    for (const element of this.getLayout()) {\n      if (element.outputType && (element.id === id || element.name === id)) {\n        return element;\n      }\n    }\n  }\n  setOutput(name, value) {\n    const outputs = this._outputs;\n    if (outputs[name] === undefined) {\n      outputs[name] = scriptableValue(value);\n    } else {\n      outputs[name].value = value;\n    }\n    return this;\n  }\n  getOutput(name) {\n    return this._outputs[name];\n  }\n  getParameter(name) {\n    return this.parameters[name];\n  }\n  setParameter(name, value) {\n    const parameters = this.parameters;\n    if (value && value.isScriptableNode) {\n      this.deleteParameter(name);\n      parameters[name] = value;\n      parameters[name].getDefaultOutput().events.addEventListener('refresh', this.onRefresh);\n    } else if (value && value.isScriptableValueNode) {\n      this.deleteParameter(name);\n      parameters[name] = value;\n      parameters[name].events.addEventListener('refresh', this.onRefresh);\n    } else if (parameters[name] === undefined) {\n      parameters[name] = scriptableValue(value);\n      parameters[name].events.addEventListener('refresh', this.onRefresh);\n    } else {\n      parameters[name].value = value;\n    }\n    return this;\n  }\n  getValue() {\n    return this.getDefaultOutput().getValue();\n  }\n  deleteParameter(name) {\n    let valueNode = this.parameters[name];\n    if (valueNode) {\n      if (valueNode.isScriptableNode) valueNode = valueNode.getDefaultOutput();\n      valueNode.events.removeEventListener('refresh', this.onRefresh);\n    }\n    return this;\n  }\n  clearParameters() {\n    for (const name of Object.keys(this.parameters)) {\n      this.deleteParameter(name);\n    }\n    this.needsUpdate = true;\n    return this;\n  }\n  call(name) {\n    const object = this.getObject();\n    const method = object[name];\n    if (typeof method === 'function') {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        params[_key2 - 1] = arguments[_key2];\n      }\n      return method(...params);\n    }\n  }\n  async callAsync(name) {\n    const object = this.getObject();\n    const method = object[name];\n    if (typeof method === 'function') {\n      for (var _len3 = arguments.length, params = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        params[_key3 - 1] = arguments[_key3];\n      }\n      return method.constructor.name === 'AsyncFunction' ? await method(...params) : method(...params);\n    }\n  }\n  getNodeType(builder) {\n    return this.getDefaultOutputNode().getNodeType(builder);\n  }\n  refresh() {\n    let output = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (output !== null) {\n      this.getOutput(output).refresh();\n    } else {\n      this._refresh();\n    }\n  }\n  getObject() {\n    if (this.needsUpdate) this.dispose();\n    if (this._object !== null) return this._object;\n\n    //\n\n    const refresh = () => this.refresh();\n    const setOutput = (id, value) => this.setOutput(id, value);\n    const parameters = new Parameters(this);\n    const THREE = global.get('THREE');\n    const TSL = global.get('TSL');\n    const method = this.getMethod(this.codeNode);\n    const params = [parameters, this._local, global, refresh, setOutput, THREE, TSL];\n    this._object = method(...params);\n    const layout = this._object.layout;\n    if (layout) {\n      if (layout.cache === false) {\n        this._local.clear();\n      }\n\n      // default output\n      this._output.outputType = layout.outputType || null;\n      if (Array.isArray(layout.elements)) {\n        for (const element of layout.elements) {\n          const id = element.id || element.name;\n          if (element.inputType) {\n            if (this.getParameter(id) === undefined) this.setParameter(id, null);\n            this.getParameter(id).inputType = element.inputType;\n          }\n          if (element.outputType) {\n            if (this.getOutput(id) === undefined) this.setOutput(id, null);\n            this.getOutput(id).outputType = element.outputType;\n          }\n        }\n      }\n    }\n    return this._object;\n  }\n  deserialize(data) {\n    super.deserialize(data);\n    for (const name in this.parameters) {\n      let valueNode = this.parameters[name];\n      if (valueNode.isScriptableNode) valueNode = valueNode.getDefaultOutput();\n      valueNode.events.addEventListener('refresh', this.onRefresh);\n    }\n  }\n  getLayout() {\n    return this.getObject().layout;\n  }\n  getDefaultOutputNode() {\n    const output = this.getDefaultOutput().value;\n    if (output && output.isNode) {\n      return output;\n    }\n    return float();\n  }\n  getDefaultOutput() {\n    return this._exec()._output;\n  }\n  getMethod() {\n    if (this.needsUpdate) this.dispose();\n    if (this._method !== null) return this._method;\n\n    //\n\n    const parametersProps = ['parameters', 'local', 'global', 'refresh', 'setOutput', 'THREE', 'TSL'];\n    const interfaceProps = ['layout', 'init', 'main', 'dispose'];\n    const properties = interfaceProps.join(', ');\n    const declarations = 'var ' + properties + '; var output = {};\\n';\n    const returns = '\\nreturn { ...output, ' + properties + ' };';\n    const code = declarations + this.codeNode.code + returns;\n\n    //\n\n    this._method = new Function(...parametersProps, code);\n    return this._method;\n  }\n  dispose() {\n    if (this._method === null) return;\n    if (this._object && typeof this._object.dispose === 'function') {\n      this._object.dispose();\n    }\n    this._method = null;\n    this._object = null;\n    this._source = null;\n    this._value = null;\n    this._needsOutputUpdate = true;\n    this._output.value = null;\n    this._outputs = {};\n  }\n  setup() {\n    return this.getDefaultOutputNode();\n  }\n  set needsUpdate(value) {\n    if (value === true) this.dispose();\n  }\n  get needsUpdate() {\n    return this.source !== this._source;\n  }\n  _exec() {\n    if (this.codeNode === null) return this;\n    if (this._needsOutputUpdate === true) {\n      this._value = this.call('main');\n      this._needsOutputUpdate = false;\n    }\n    this._output.value = this._value;\n    return this;\n  }\n  _refresh() {\n    this.needsUpdate = true;\n    this._exec();\n    this._output.refresh();\n  }\n}\nexport default ScriptableNode;\nexport const scriptable = nodeProxy(ScriptableNode);\naddNodeElement('scriptable', scriptable);\naddNodeClass('ScriptableNode', ScriptableNode);","map":{"version":3,"names":["Node","addNodeClass","scriptableValue","addNodeElement","nodeProxy","float","Resources","Map","get","key","callback","arguments","length","undefined","has","_len","params","Array","_key","value","set","Parameters","constructor","scriptableNode","parameters","layout","getLayout","getInputLayout","id","name","param","getValue","global","ScriptableNode","codeNode","_local","_output","_outputs","_source","source","_method","_object","_value","_needsOutputUpdate","onRefresh","bind","isScriptableNode","code","setLocal","getLocal","_refresh","element","inputType","getOutputLayout","outputType","setOutput","outputs","getOutput","getParameter","setParameter","deleteParameter","getDefaultOutput","events","addEventListener","isScriptableValueNode","valueNode","removeEventListener","clearParameters","Object","keys","needsUpdate","call","object","getObject","method","_len2","_key2","callAsync","_len3","_key3","getNodeType","builder","getDefaultOutputNode","refresh","output","dispose","THREE","TSL","getMethod","cache","clear","isArray","elements","deserialize","data","isNode","_exec","parametersProps","interfaceProps","properties","join","declarations","returns","Function","setup","scriptable"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/code/ScriptableNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { scriptableValue } from './ScriptableValueNode.js';\nimport { addNodeElement, nodeProxy, float } from '../shadernode/ShaderNode.js';\n\nclass Resources extends Map {\n\n\tget( key, callback = null, ...params ) {\n\n\t\tif ( this.has( key ) ) return super.get( key );\n\n\t\tif ( callback !== null ) {\n\n\t\t\tconst value = callback( ...params );\n\t\t\tthis.set( key, value );\n\t\t\treturn value;\n\n\t\t}\n\n\t}\n\n}\n\nclass Parameters {\n\n\tconstructor( scriptableNode ) {\n\n\t\tthis.scriptableNode = scriptableNode;\n\n\t}\n\n\tget parameters() {\n\n\t\treturn this.scriptableNode.parameters;\n\n\t}\n\n\tget layout() {\n\n\t\treturn this.scriptableNode.getLayout();\n\n\t}\n\n\tgetInputLayout( id ) {\n\n\t\treturn this.scriptableNode.getInputLayout( id );\n\n\t}\n\n\tget( name ) {\n\n\t\tconst param = this.parameters[ name ];\n\t\tconst value = param ? param.getValue() : null;\n\n\t\treturn value;\n\n\t}\n\n}\n\nexport const global = new Resources();\n\nclass ScriptableNode extends Node {\n\n\tconstructor( codeNode = null, parameters = {} ) {\n\n\t\tsuper();\n\n\t\tthis.codeNode = codeNode;\n\t\tthis.parameters = parameters;\n\n\t\tthis._local = new Resources();\n\t\tthis._output = scriptableValue();\n\t\tthis._outputs = {};\n\t\tthis._source = this.source;\n\t\tthis._method = null;\n\t\tthis._object = null;\n\t\tthis._value = null;\n\t\tthis._needsOutputUpdate = true;\n\n\t\tthis.onRefresh = this.onRefresh.bind( this );\n\n\t\tthis.isScriptableNode = true;\n\n\t}\n\n\tget source() {\n\n\t\treturn this.codeNode ? this.codeNode.code : '';\n\n\t}\n\n\tsetLocal( name, value ) {\n\n\t\treturn this._local.set( name, value );\n\n\t}\n\n\tgetLocal( name ) {\n\n\t\treturn this._local.get( name );\n\n\t}\n\n\tonRefresh() {\n\n\t\tthis._refresh();\n\n\t}\n\n\tgetInputLayout( id ) {\n\n\t\tfor ( const element of this.getLayout() ) {\n\n\t\t\tif ( element.inputType && ( element.id === id || element.name === id ) ) {\n\n\t\t\t\treturn element;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetOutputLayout( id ) {\n\n\t\tfor ( const element of this.getLayout() ) {\n\n\t\t\tif ( element.outputType && ( element.id === id || element.name === id ) ) {\n\n\t\t\t\treturn element;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tsetOutput( name, value ) {\n\n\t\tconst outputs = this._outputs;\n\n\t\tif ( outputs[ name ] === undefined ) {\n\n\t\t\toutputs[ name ] = scriptableValue( value );\n\n\t\t} else {\n\n\t\t\toutputs[ name ].value = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetOutput( name ) {\n\n\t\treturn this._outputs[ name ];\n\n\t}\n\n\tgetParameter( name ) {\n\n\t\treturn this.parameters[ name ];\n\n\t}\n\n\tsetParameter( name, value ) {\n\n\t\tconst parameters = this.parameters;\n\n\t\tif ( value && value.isScriptableNode ) {\n\n\t\t\tthis.deleteParameter( name );\n\n\t\t\tparameters[ name ] = value;\n\t\t\tparameters[ name ].getDefaultOutput().events.addEventListener( 'refresh', this.onRefresh );\n\n\t\t} else if ( value && value.isScriptableValueNode ) {\n\n\t\t\tthis.deleteParameter( name );\n\n\t\t\tparameters[ name ] = value;\n\t\t\tparameters[ name ].events.addEventListener( 'refresh', this.onRefresh );\n\n\t\t} else if ( parameters[ name ] === undefined ) {\n\n\t\t\tparameters[ name ] = scriptableValue( value );\n\t\t\tparameters[ name ].events.addEventListener( 'refresh', this.onRefresh );\n\n\t\t} else {\n\n\t\t\tparameters[ name ].value = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetValue() {\n\n\t\treturn this.getDefaultOutput().getValue();\n\n\t}\n\n\tdeleteParameter( name ) {\n\n\t\tlet valueNode = this.parameters[ name ];\n\n\t\tif ( valueNode ) {\n\n\t\t\tif ( valueNode.isScriptableNode ) valueNode = valueNode.getDefaultOutput();\n\n\t\t\tvalueNode.events.removeEventListener( 'refresh', this.onRefresh );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclearParameters() {\n\n\t\tfor ( const name of Object.keys( this.parameters ) ) {\n\n\t\t\tthis.deleteParameter( name );\n\n\t\t}\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tcall( name, ...params ) {\n\n\t\tconst object = this.getObject();\n\t\tconst method = object[ name ];\n\n\t\tif ( typeof method === 'function' ) {\n\n\t\t\treturn method( ...params );\n\n\t\t}\n\n\t}\n\n\tasync callAsync( name, ...params ) {\n\n\t\tconst object = this.getObject();\n\t\tconst method = object[ name ];\n\n\t\tif ( typeof method === 'function' ) {\n\n\t\t\treturn method.constructor.name === 'AsyncFunction' ? await method( ...params ) : method( ...params );\n\n\t\t}\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\treturn this.getDefaultOutputNode().getNodeType( builder );\n\n\t}\n\n\trefresh( output = null ) {\n\n\t\tif ( output !== null ) {\n\n\t\t\tthis.getOutput( output ).refresh();\n\n\t\t} else {\n\n\t\t\tthis._refresh();\n\n\t\t}\n\n\t}\n\n\tgetObject() {\n\n\t\tif ( this.needsUpdate ) this.dispose();\n\t\tif ( this._object !== null ) return this._object;\n\n\t\t//\n\n\t\tconst refresh = () => this.refresh();\n\t\tconst setOutput = ( id, value ) => this.setOutput( id, value );\n\n\t\tconst parameters = new Parameters( this );\n\n\t\tconst THREE = global.get( 'THREE' );\n\t\tconst TSL = global.get( 'TSL' );\n\n\t\tconst method = this.getMethod( this.codeNode );\n\t\tconst params = [ parameters, this._local, global, refresh, setOutput, THREE, TSL ];\n\n\t\tthis._object = method( ...params );\n\n\t\tconst layout = this._object.layout;\n\n\t\tif ( layout ) {\n\n\t\t\tif ( layout.cache === false ) {\n\n\t\t\t\tthis._local.clear();\n\n\t\t\t}\n\n\t\t\t// default output\n\t\t\tthis._output.outputType = layout.outputType || null;\n\n\t\t\tif ( Array.isArray( layout.elements ) ) {\n\n\t\t\t\tfor ( const element of layout.elements ) {\n\n\t\t\t\t\tconst id = element.id || element.name;\n\n\t\t\t\t\tif ( element.inputType ) {\n\n\t\t\t\t\t\tif ( this.getParameter( id ) === undefined ) this.setParameter( id, null );\n\n\t\t\t\t\t\tthis.getParameter( id ).inputType = element.inputType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( element.outputType ) {\n\n\t\t\t\t\t\tif ( this.getOutput( id ) === undefined ) this.setOutput( id, null );\n\n\t\t\t\t\t\tthis.getOutput( id ).outputType = element.outputType;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this._object;\n\n\t}\n\n\tdeserialize( data ) {\n\n\t\tsuper.deserialize( data );\n\n\t\tfor ( const name in this.parameters ) {\n\n\t\t\tlet valueNode = this.parameters[ name ];\n\n\t\t\tif ( valueNode.isScriptableNode ) valueNode = valueNode.getDefaultOutput();\n\n\t\t\tvalueNode.events.addEventListener( 'refresh', this.onRefresh );\n\n\t\t}\n\n\t}\n\n\tgetLayout() {\n\n\t\treturn this.getObject().layout;\n\n\t}\n\n\tgetDefaultOutputNode() {\n\n\t\tconst output = this.getDefaultOutput().value;\n\n\t\tif ( output && output.isNode ) {\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\treturn float();\n\n\t}\n\n\tgetDefaultOutput()\t{\n\n\t\treturn this._exec()._output;\n\n\t}\n\n\tgetMethod() {\n\n\t\tif ( this.needsUpdate ) this.dispose();\n\t\tif ( this._method !== null ) return this._method;\n\n\t\t//\n\n\t\tconst parametersProps = [ 'parameters', 'local', 'global', 'refresh', 'setOutput', 'THREE', 'TSL' ];\n\t\tconst interfaceProps = [ 'layout', 'init', 'main', 'dispose' ];\n\n\t\tconst properties = interfaceProps.join( ', ' );\n\t\tconst declarations = 'var ' + properties + '; var output = {};\\n';\n\t\tconst returns = '\\nreturn { ...output, ' + properties + ' };';\n\n\t\tconst code = declarations + this.codeNode.code + returns;\n\n\t\t//\n\n\t\tthis._method = new Function( ...parametersProps, code );\n\n\t\treturn this._method;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this._method === null ) return;\n\n\t\tif ( this._object && typeof this._object.dispose === 'function' ) {\n\n\t\t\tthis._object.dispose();\n\n\t\t}\n\n\t\tthis._method = null;\n\t\tthis._object = null;\n\t\tthis._source = null;\n\t\tthis._value = null;\n\t\tthis._needsOutputUpdate = true;\n\t\tthis._output.value = null;\n\t\tthis._outputs = {};\n\n\t}\n\n\tsetup() {\n\n\t\treturn this.getDefaultOutputNode();\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.dispose();\n\n\t}\n\n\tget needsUpdate() {\n\n\t\treturn this.source !== this._source;\n\n\t}\n\n\t_exec()\t{\n\n\t\tif ( this.codeNode === null ) return this;\n\n\t\tif ( this._needsOutputUpdate === true ) {\n\n\t\t\tthis._value = this.call( 'main' );\n\n\t\t\tthis._needsOutputUpdate = false;\n\n\t\t}\n\n\t\tthis._output.value = this._value;\n\n\t\treturn this;\n\n\t}\n\n\t_refresh() {\n\n\t\tthis.needsUpdate = true;\n\n\t\tthis._exec();\n\n\t\tthis._output.refresh();\n\n\t}\n\n}\n\nexport default ScriptableNode;\n\nexport const scriptable = nodeProxy( ScriptableNode );\n\naddNodeElement( 'scriptable', scriptable );\n\naddNodeClass( 'ScriptableNode', ScriptableNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}