{"ast":null,"code":"import TempNode from '../core/TempNode.js';\nimport { positionWorldDirection } from '../accessors/PositionNode.js';\nimport { nodeProxy, vec2 } from '../shadernode/ShaderNode.js';\nimport { addNodeClass } from '../core/Node.js';\nclass EquirectUVNode extends TempNode {\n  constructor() {\n    let dirNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : positionWorldDirection;\n    super('vec2');\n    this.dirNode = dirNode;\n  }\n  setup() {\n    const dir = this.dirNode;\n    const u = dir.z.atan2(dir.x).mul(1 / (Math.PI * 2)).add(0.5);\n    const v = dir.y.negate().clamp(-1.0, 1.0).asin().mul(1 / Math.PI).add(0.5); // @TODO: The use of negate() here could be an NDC issue.\n\n    return vec2(u, v);\n  }\n}\nexport default EquirectUVNode;\nexport const equirectUV = nodeProxy(EquirectUVNode);\naddNodeClass('EquirectUVNode', EquirectUVNode);","map":{"version":3,"names":["TempNode","positionWorldDirection","nodeProxy","vec2","addNodeClass","EquirectUVNode","constructor","dirNode","arguments","length","undefined","setup","dir","u","z","atan2","x","mul","Math","PI","add","v","y","negate","clamp","asin","equirectUV"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/utils/EquirectUVNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\nimport { positionWorldDirection } from '../accessors/PositionNode.js';\nimport { nodeProxy, vec2 } from '../shadernode/ShaderNode.js';\nimport { addNodeClass } from '../core/Node.js';\n\nclass EquirectUVNode extends TempNode {\n\n\tconstructor( dirNode = positionWorldDirection ) {\n\n\t\tsuper( 'vec2' );\n\n\t\tthis.dirNode = dirNode;\n\n\t}\n\n\tsetup() {\n\n\t\tconst dir = this.dirNode;\n\n\t\tconst u = dir.z.atan2( dir.x ).mul( 1 / ( Math.PI * 2 ) ).add( 0.5 );\n\t\tconst v = dir.y.negate().clamp( - 1.0, 1.0 ).asin().mul( 1 / Math.PI ).add( 0.5 ); // @TODO: The use of negate() here could be an NDC issue.\n\n\t\treturn vec2( u, v );\n\n\t}\n\n}\n\nexport default EquirectUVNode;\n\nexport const equirectUV = nodeProxy( EquirectUVNode );\n\naddNodeClass( 'EquirectUVNode', EquirectUVNode );\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,qBAAqB;AAC1C,SAASC,sBAAsB,QAAQ,8BAA8B;AACrE,SAASC,SAAS,EAAEC,IAAI,QAAQ,6BAA6B;AAC7D,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,MAAMC,cAAc,SAASL,QAAQ,CAAC;EAErCM,WAAWA,CAAA,EAAqC;IAAA,IAAnCC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGP,sBAAsB;IAE5C,KAAK,CAAE,MAAO,CAAC;IAEf,IAAI,CAACM,OAAO,GAAGA,OAAO;EAEvB;EAEAI,KAAKA,CAAA,EAAG;IAEP,MAAMC,GAAG,GAAG,IAAI,CAACL,OAAO;IAExB,MAAMM,CAAC,GAAGD,GAAG,CAACE,CAAC,CAACC,KAAK,CAAEH,GAAG,CAACI,CAAE,CAAC,CAACC,GAAG,CAAE,CAAC,IAAKC,IAAI,CAACC,EAAE,GAAG,CAAC,CAAG,CAAC,CAACC,GAAG,CAAE,GAAI,CAAC;IACpE,MAAMC,CAAC,GAAGT,GAAG,CAACU,CAAC,CAACC,MAAM,CAAC,CAAC,CAACC,KAAK,CAAE,CAAE,GAAG,EAAE,GAAI,CAAC,CAACC,IAAI,CAAC,CAAC,CAACR,GAAG,CAAE,CAAC,GAAGC,IAAI,CAACC,EAAG,CAAC,CAACC,GAAG,CAAE,GAAI,CAAC,CAAC,CAAC;;IAEnF,OAAOjB,IAAI,CAAEU,CAAC,EAAEQ,CAAE,CAAC;EAEpB;AAED;AAEA,eAAehB,cAAc;AAE7B,OAAO,MAAMqB,UAAU,GAAGxB,SAAS,CAAEG,cAAe,CAAC;AAErDD,YAAY,CAAE,gBAAgB,EAAEC,cAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}