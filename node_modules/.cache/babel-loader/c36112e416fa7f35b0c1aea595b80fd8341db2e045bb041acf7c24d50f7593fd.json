{"ast":null,"code":"import Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { texture } from './TextureNode.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\nclass ReferenceNode extends Node {\n  constructor(property, uniformType) {\n    let object = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    super();\n    this.property = property;\n    this.index = null;\n    this.uniformType = uniformType;\n    this.object = object;\n    this.reference = null;\n    this.node = null;\n    this.updateType = NodeUpdateType.OBJECT;\n    this.setNodeType(uniformType);\n  }\n  updateReference(frame) {\n    this.reference = this.object !== null ? this.object : frame.object;\n    return this.reference;\n  }\n  setIndex(index) {\n    this.index = index;\n    return this;\n  }\n  getIndex() {\n    return this.index;\n  }\n  setNodeType(uniformType) {\n    let node = null;\n    if (uniformType === 'texture') {\n      node = texture(null);\n    } else {\n      node = uniform(uniformType);\n    }\n    this.node = node;\n  }\n  getNodeType(builder) {\n    return this.node.getNodeType(builder);\n  }\n  update( /*frame*/\n  ) {\n    let value = this.reference[this.property];\n    if (this.index !== null) {\n      value = value[this.index];\n    }\n    this.node.value = value;\n  }\n  setup( /*builder*/\n  ) {\n    return this.node;\n  }\n}\nexport default ReferenceNode;\nexport const reference = (name, type, object) => nodeObject(new ReferenceNode(name, type, object));\nexport const referenceIndex = (name, index, type, object) => nodeObject(new ReferenceNode(name, type, object).setIndex(index));\naddNodeClass('ReferenceNode', ReferenceNode);","map":{"version":3,"names":["Node","addNodeClass","NodeUpdateType","uniform","texture","nodeObject","ReferenceNode","constructor","property","uniformType","object","arguments","length","undefined","index","reference","node","updateType","OBJECT","setNodeType","updateReference","frame","setIndex","getIndex","getNodeType","builder","update","value","setup","name","type","referenceIndex"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/accessors/ReferenceNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { texture } from './TextureNode.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\n\nclass ReferenceNode extends Node {\n\n\tconstructor( property, uniformType, object = null ) {\n\n\t\tsuper();\n\n\t\tthis.property = property;\n\t\tthis.index = null;\n\n\t\tthis.uniformType = uniformType;\n\n\t\tthis.object = object;\n\t\tthis.reference = null;\n\n\t\tthis.node = null;\n\n\t\tthis.updateType = NodeUpdateType.OBJECT;\n\n\t\tthis.setNodeType( uniformType );\n\n\t}\n\n\tupdateReference( frame ) {\n\n\t\tthis.reference = this.object !== null ? this.object : frame.object;\n\n\t\treturn this.reference;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tthis.index = index;\n\n\t\treturn this;\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetNodeType( uniformType ) {\n\n\t\tlet node = null;\n\n\t\tif ( uniformType === 'texture' ) {\n\n\t\t\tnode = texture( null );\n\n\t\t} else {\n\n\t\t\tnode = uniform( uniformType );\n\n\t\t}\n\n\t\tthis.node = node;\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\treturn this.node.getNodeType( builder );\n\n\t}\n\n\tupdate( /*frame*/ ) {\n\n\t\tlet value = this.reference[ this.property ];\n\n\t\tif ( this.index !== null ) {\n\n\t\t\tvalue = value[ this.index ];\n\n\t\t}\n\n\t\tthis.node.value = value;\n\n\t}\n\n\tsetup( /*builder*/ ) {\n\n\t\treturn this.node;\n\n\t}\n\n}\n\nexport default ReferenceNode;\n\nexport const reference = ( name, type, object ) => nodeObject( new ReferenceNode( name, type, object ) );\nexport const referenceIndex = ( name, index, type, object ) => nodeObject( new ReferenceNode( name, type, object ).setIndex( index ) );\n\naddNodeClass( 'ReferenceNode', ReferenceNode );\n"],"mappings":"AAAA,OAAOA,IAAI,IAAIC,YAAY,QAAQ,iBAAiB;AACpD,SAASC,cAAc,QAAQ,sBAAsB;AACrD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,SAASC,UAAU,QAAQ,6BAA6B;AAExD,MAAMC,aAAa,SAASN,IAAI,CAAC;EAEhCO,WAAWA,CAAEC,QAAQ,EAAEC,WAAW,EAAkB;IAAA,IAAhBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAEhD,KAAK,CAAC,CAAC;IAEP,IAAI,CAACH,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACM,KAAK,GAAG,IAAI;IAEjB,IAAI,CAACL,WAAW,GAAGA,WAAW;IAE9B,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACK,SAAS,GAAG,IAAI;IAErB,IAAI,CAACC,IAAI,GAAG,IAAI;IAEhB,IAAI,CAACC,UAAU,GAAGf,cAAc,CAACgB,MAAM;IAEvC,IAAI,CAACC,WAAW,CAAEV,WAAY,CAAC;EAEhC;EAEAW,eAAeA,CAAEC,KAAK,EAAG;IAExB,IAAI,CAACN,SAAS,GAAG,IAAI,CAACL,MAAM,KAAK,IAAI,GAAG,IAAI,CAACA,MAAM,GAAGW,KAAK,CAACX,MAAM;IAElE,OAAO,IAAI,CAACK,SAAS;EAEtB;EAEAO,QAAQA,CAAER,KAAK,EAAG;IAEjB,IAAI,CAACA,KAAK,GAAGA,KAAK;IAElB,OAAO,IAAI;EAEZ;EAEAS,QAAQA,CAAA,EAAG;IAEV,OAAO,IAAI,CAACT,KAAK;EAElB;EAEAK,WAAWA,CAAEV,WAAW,EAAG;IAE1B,IAAIO,IAAI,GAAG,IAAI;IAEf,IAAKP,WAAW,KAAK,SAAS,EAAG;MAEhCO,IAAI,GAAGZ,OAAO,CAAE,IAAK,CAAC;IAEvB,CAAC,MAAM;MAENY,IAAI,GAAGb,OAAO,CAAEM,WAAY,CAAC;IAE9B;IAEA,IAAI,CAACO,IAAI,GAAGA,IAAI;EAEjB;EAEAQ,WAAWA,CAAEC,OAAO,EAAG;IAEtB,OAAO,IAAI,CAACT,IAAI,CAACQ,WAAW,CAAEC,OAAQ,CAAC;EAExC;EAEAC,MAAMA,CAAA,CAAE;EAAA,EAAY;IAEnB,IAAIC,KAAK,GAAG,IAAI,CAACZ,SAAS,CAAE,IAAI,CAACP,QAAQ,CAAE;IAE3C,IAAK,IAAI,CAACM,KAAK,KAAK,IAAI,EAAG;MAE1Ba,KAAK,GAAGA,KAAK,CAAE,IAAI,CAACb,KAAK,CAAE;IAE5B;IAEA,IAAI,CAACE,IAAI,CAACW,KAAK,GAAGA,KAAK;EAExB;EAEAC,KAAKA,CAAA,CAAE;EAAA,EAAc;IAEpB,OAAO,IAAI,CAACZ,IAAI;EAEjB;AAED;AAEA,eAAeV,aAAa;AAE5B,OAAO,MAAMS,SAAS,GAAGA,CAAEc,IAAI,EAAEC,IAAI,EAAEpB,MAAM,KAAML,UAAU,CAAE,IAAIC,aAAa,CAAEuB,IAAI,EAAEC,IAAI,EAAEpB,MAAO,CAAE,CAAC;AACxG,OAAO,MAAMqB,cAAc,GAAGA,CAAEF,IAAI,EAAEf,KAAK,EAAEgB,IAAI,EAAEpB,MAAM,KAAML,UAAU,CAAE,IAAIC,aAAa,CAAEuB,IAAI,EAAEC,IAAI,EAAEpB,MAAO,CAAC,CAACY,QAAQ,CAAER,KAAM,CAAE,CAAC;AAEtIb,YAAY,CAAE,eAAe,EAAEK,aAAc,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}