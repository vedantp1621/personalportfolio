{"ast":null,"code":"import TempNode from '../core/TempNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, nodeProxy, vec4, mat2, mat4 } from '../shadernode/ShaderNode.js';\nimport { cos, sin } from '../math/MathNode.js';\nclass RotateNode extends TempNode {\n  constructor(positionNode, rotationNode) {\n    super();\n    this.positionNode = positionNode;\n    this.rotationNode = rotationNode;\n  }\n  getNodeType(builder) {\n    return this.positionNode.getNodeType(builder);\n  }\n  setup(builder) {\n    const {\n      rotationNode,\n      positionNode\n    } = this;\n    const nodeType = this.getNodeType(builder);\n    if (nodeType === 'vec2') {\n      const cosAngle = rotationNode.cos();\n      const sinAngle = rotationNode.sin();\n      const rotationMatrix = mat2(cosAngle, sinAngle, sinAngle.negate(), cosAngle);\n      return rotationMatrix.mul(positionNode);\n    } else {\n      const rotation = rotationNode;\n      const rotationXMatrix = mat4(vec4(1.0, 0.0, 0.0, 0.0), vec4(0.0, cos(rotation.x), sin(rotation.x).negate(), 0.0), vec4(0.0, sin(rotation.x), cos(rotation.x), 0.0), vec4(0.0, 0.0, 0.0, 1.0));\n      const rotationYMatrix = mat4(vec4(cos(rotation.y), 0.0, sin(rotation.y), 0.0), vec4(0.0, 1.0, 0.0, 0.0), vec4(sin(rotation.y).negate(), 0.0, cos(rotation.y), 0.0), vec4(0.0, 0.0, 0.0, 1.0));\n      const rotationZMatrix = mat4(vec4(cos(rotation.z), sin(rotation.z).negate(), 0.0, 0.0), vec4(sin(rotation.z), cos(rotation.z), 0.0, 0.0), vec4(0.0, 0.0, 1.0, 0.0), vec4(0.0, 0.0, 0.0, 1.0));\n      return rotationXMatrix.mul(rotationYMatrix).mul(rotationZMatrix).mul(vec4(positionNode, 1.0)).xyz;\n    }\n  }\n}\nexport default RotateNode;\nexport const rotate = nodeProxy(RotateNode);\naddNodeElement('rotate', rotate);\naddNodeClass('RotateNode', RotateNode);","map":{"version":3,"names":["TempNode","addNodeClass","addNodeElement","nodeProxy","vec4","mat2","mat4","cos","sin","RotateNode","constructor","positionNode","rotationNode","getNodeType","builder","setup","nodeType","cosAngle","sinAngle","rotationMatrix","negate","mul","rotation","rotationXMatrix","x","rotationYMatrix","y","rotationZMatrix","z","xyz","rotate"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/utils/RotateNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport {\n\taddNodeElement,\n\tnodeProxy,\n\tvec4,\n\tmat2,\n\tmat4,\n} from '../shadernode/ShaderNode.js';\nimport { cos, sin } from '../math/MathNode.js';\n\nclass RotateNode extends TempNode {\n\n\tconstructor( positionNode, rotationNode ) {\n\n\t\tsuper();\n\n\t\tthis.positionNode = positionNode;\n\t\tthis.rotationNode = rotationNode;\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\treturn this.positionNode.getNodeType( builder );\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst { rotationNode, positionNode } = this;\n\n\t\tconst nodeType = this.getNodeType( builder );\n\n\t\tif ( nodeType === 'vec2' ) {\n\n\t\t\tconst cosAngle = rotationNode.cos();\n\t\t\tconst sinAngle = rotationNode.sin();\n\n\t\t\tconst rotationMatrix = mat2(\n\t\t\t\tcosAngle, sinAngle,\n\t\t\t\tsinAngle.negate(), cosAngle\n\t\t\t);\n\n\t\t\treturn rotationMatrix.mul( positionNode );\n\n\t\t} else {\n\n\t\t\tconst rotation = rotationNode;\n\t\t\tconst rotationXMatrix = mat4( vec4( 1.0, 0.0, 0.0, 0.0 ), vec4( 0.0, cos( rotation.x ), sin( rotation.x ).negate(), 0.0 ), vec4( 0.0, sin( rotation.x ), cos( rotation.x ), 0.0 ), vec4( 0.0, 0.0, 0.0, 1.0 ) );\n\t\t\tconst rotationYMatrix = mat4( vec4( cos( rotation.y ), 0.0, sin( rotation.y ), 0.0 ), vec4( 0.0, 1.0, 0.0, 0.0 ), vec4( sin( rotation.y ).negate(), 0.0, cos( rotation.y ), 0.0 ), vec4( 0.0, 0.0, 0.0, 1.0 ) );\n\t\t\tconst rotationZMatrix = mat4( vec4( cos( rotation.z ), sin( rotation.z ).negate(), 0.0, 0.0 ), vec4( sin( rotation.z ), cos( rotation.z ), 0.0, 0.0 ), vec4( 0.0, 0.0, 1.0, 0.0 ), vec4( 0.0, 0.0, 0.0, 1.0 ) );\n\n\t\t\treturn rotationXMatrix.mul( rotationYMatrix ).mul( rotationZMatrix ).mul( vec4( positionNode, 1.0 ) ).xyz;\n\n\t\t}\n\n\t}\n\n}\n\nexport default RotateNode;\n\nexport const rotate = nodeProxy( RotateNode );\n\naddNodeElement( 'rotate', rotate );\n\naddNodeClass( 'RotateNode', RotateNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}