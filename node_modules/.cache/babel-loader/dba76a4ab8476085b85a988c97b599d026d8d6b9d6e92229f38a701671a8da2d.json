{"ast":null,"code":"import { div } from '../../math/OperatorNode.js';\nimport { EPSILON } from '../../math/MathNode.js';\nimport { tslFn } from '../../shadernode/ShaderNode.js';\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nconst V_GGX_SmithCorrelated = tslFn(inputs => {\n  const {\n    alpha,\n    dotNL,\n    dotNV\n  } = inputs;\n  const a2 = alpha.pow2();\n  const gv = dotNL.mul(a2.add(a2.oneMinus().mul(dotNV.pow2())).sqrt());\n  const gl = dotNV.mul(a2.add(a2.oneMinus().mul(dotNL.pow2())).sqrt());\n  return div(0.5, gv.add(gl).max(EPSILON));\n}).setLayout({\n  name: 'V_GGX_SmithCorrelated',\n  type: 'float',\n  inputs: [{\n    name: 'alpha',\n    type: 'float'\n  }, {\n    name: 'dotNL',\n    type: 'float'\n  }, {\n    name: 'dotNV',\n    type: 'float'\n  }]\n}); // validated\n\nexport default V_GGX_SmithCorrelated;","map":{"version":3,"names":["div","EPSILON","tslFn","V_GGX_SmithCorrelated","inputs","alpha","dotNL","dotNV","a2","pow2","gv","mul","add","oneMinus","sqrt","gl","max","setLayout","name","type"],"sources":["/Users/vedant/node_modules/three/examples/jsm/nodes/functions/BSDF/V_GGX_SmithCorrelated.js"],"sourcesContent":["import { div } from '../../math/OperatorNode.js';\nimport { EPSILON } from '../../math/MathNode.js';\nimport { tslFn } from '../../shadernode/ShaderNode.js';\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nconst V_GGX_SmithCorrelated = tslFn( ( inputs ) => {\n\n\tconst { alpha, dotNL, dotNV } = inputs;\n\n\tconst a2 = alpha.pow2();\n\n\tconst gv = dotNL.mul( a2.add( a2.oneMinus().mul( dotNV.pow2() ) ).sqrt() );\n\tconst gl = dotNV.mul( a2.add( a2.oneMinus().mul( dotNL.pow2() ) ).sqrt() );\n\n\treturn div( 0.5, gv.add( gl ).max( EPSILON ) );\n\n} ).setLayout( {\n\tname: 'V_GGX_SmithCorrelated',\n\ttype: 'float',\n\tinputs: [\n\t\t{ name: 'alpha', type: 'float' },\n\t\t{ name: 'dotNL', type: 'float' },\n\t\t{ name: 'dotNV', type: 'float' }\n\t]\n} ); // validated\n\nexport default V_GGX_SmithCorrelated;\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,4BAA4B;AAChD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,KAAK,QAAQ,gCAAgC;;AAEtD;AACA;AACA,MAAMC,qBAAqB,GAAGD,KAAK,CAAIE,MAAM,IAAM;EAElD,MAAM;IAAEC,KAAK;IAAEC,KAAK;IAAEC;EAAM,CAAC,GAAGH,MAAM;EAEtC,MAAMI,EAAE,GAAGH,KAAK,CAACI,IAAI,CAAC,CAAC;EAEvB,MAAMC,EAAE,GAAGJ,KAAK,CAACK,GAAG,CAAEH,EAAE,CAACI,GAAG,CAAEJ,EAAE,CAACK,QAAQ,CAAC,CAAC,CAACF,GAAG,CAAEJ,KAAK,CAACE,IAAI,CAAC,CAAE,CAAE,CAAC,CAACK,IAAI,CAAC,CAAE,CAAC;EAC1E,MAAMC,EAAE,GAAGR,KAAK,CAACI,GAAG,CAAEH,EAAE,CAACI,GAAG,CAAEJ,EAAE,CAACK,QAAQ,CAAC,CAAC,CAACF,GAAG,CAAEL,KAAK,CAACG,IAAI,CAAC,CAAE,CAAE,CAAC,CAACK,IAAI,CAAC,CAAE,CAAC;EAE1E,OAAOd,GAAG,CAAE,GAAG,EAAEU,EAAE,CAACE,GAAG,CAAEG,EAAG,CAAC,CAACC,GAAG,CAAEf,OAAQ,CAAE,CAAC;AAE/C,CAAE,CAAC,CAACgB,SAAS,CAAE;EACdC,IAAI,EAAE,uBAAuB;EAC7BC,IAAI,EAAE,OAAO;EACbf,MAAM,EAAE,CACP;IAAEc,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE;EAAQ,CAAC,EAChC;IAAED,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE;EAAQ,CAAC,EAChC;IAAED,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE;EAAQ,CAAC;AAElC,CAAE,CAAC,CAAC,CAAC;;AAEL,eAAehB,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}